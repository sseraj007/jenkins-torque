kind: application
inputs:
- API_PORT: 8080
- AZURE_VM_SIZE: Basic_A1
- AWS_INSTANCE_TYPE: t2.micro
- RELEASE_NUMBER: none
- API_BUILD_NUMBER: none

infrastructure:
  connectivity:
    external:
      - port_info:
          port: $API_PORT
  compute:
    spec:      
      azure:
        vm_size: $AZURE_VM_SIZE
    aws:
        instance_type: $AWS_INSTANCE_TYPE
configuration:
  start:
    script: secrets-manager-api-command.sh
  initialization:
    script: secrets-manager-api.sh
  healthcheck:
    timeout: 240
    wait_for_ports: $API_PORT
source:
  image:    
    azure_image:
    - urn: Canonical:UbuntuServer:16.04-LTS:latest
      username: adminuser
    docker_image:
    - name: ubuntu
      tag: 16.04
    ami:
      - id: ami-04d064705dc850ddd
        region: us-east-1
        username: ubuntu
  os_type: linux
spec_version: 1
debugging: 
  connection_protocol: SSH
